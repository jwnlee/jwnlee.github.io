---
layout:     post
title: 디지털 워터마킹
summary: 디지털 워터마크에 대한 개론적 설명
tags: security programming
categories: post
---
얼마전 뉴스에서 모 웹툰 회사의 만화를 인터넷에 무단으로 올린 사람이 잡혔다는 기사를 봤다. 범인이 "잡아볼테면 잡아봐라" 라고 했다는데 기사를 자세히 보지 않아서 정말 이렇게 말했는지는 잘 모르겠다. IP를 추적했을 수도 있지만 외국 서버를 이용했다고 하는 걸 보면 디지털 워터마킹을 사용한것이 아닐까 한다. 마침 정보보안 입문용 책을 보고 있었는데 이와 관련된 내용들이 있어서 간단하게 정리해봤다.

***

워터마크는 간단하게 말해서 사진이나 음악에 표시를 해서 저작권을 표시하거나 컨텐츠에 변형이 일어났는지 등을 체크할 때 사용할 수 있는 방법이다.  
자주 볼 수 있는건 블로그에 올라가는 사진에 워터마킹으로 자신의 이름을 넣거나 url 을 넣어서 자신의 작품임을 나타내는 경우가 있다. 아니면 영화에서 기밀문서에 빨간 글씨로 Top Secret 이라고 도장이 찍혀있는 경우를 볼 수 있는데 이런 것도 워터마킹이라고 볼 수 있다.  물론 지폐에 들어있는 빛에 비추면 보이는 그림들도 이런 종류의 하나라고 볼 수 있다.

간단하게 디지털 이미지에 워터마킹을 하는 방법은 RGB 값 데이터에 워터마킹을 끼워 넣는 방법이 있다.

RGB 값을 표현할때 (RGB) = ( 0x111111 ) 이렇게 표한 한다고 할때. 맨 마지막 비트를 워터마킹 정보를 저장하는 용도로 사용할 수 있다. RGB값에서 마지막 1bit 가 바뀐다고 눈으로 구분할 수 있을만큼 색이 변하지 않기 때문이다.

예를 들어서 아래같은 색들이 있다고 해보자. 각 칸의 숫자는 각 칸의 색의 RGB 값을 나타낸다.

<table><tr><th bgcolor="#ffff00">ffff00</th>
      <th bgcolor="#ff0000">ff0000</th>
      <th bgcolor="#00ff00">00ff00</th>
      <th bgcolor="#00ffff">00ffff</th>
      <th bgcolor="#00ff00">00ff00</th>
      <th bgcolor="#ff0000">ff0000</th>
      <th bgcolor="#00ff00">00ff00</th>
      <th bgcolor="#0000ff">0000ff</th>
   </tr></table>
  
이 RGB값들의 마지막 1bit 를 바꾼 값들은 바로 아래 표에 적용되어 있다.
(예를 들어 ff0000 은 ff0001 처럼 끝자리 비트만 값만 변경)  

<table><tr><th bgcolor="#ffff01">ffff01</th>
      <th bgcolor="#ff0001">ff0001</th>
      <th bgcolor="#00ff01">00ff01</th>
      <th bgcolor="#00fffe">00fffe</th>
      <th bgcolor="#00ff01">00ff01</th>
      <th bgcolor="#ff0001">ff0001</th>
      <th bgcolor="#00ff01">00ff01</th>
      <th bgcolor="#0000fe">0000fe</th>
   </tr></table>

당연한 일이겠지만 눈으로는 구분이 가지 않는다.  

이런 식으로 마지막 비트 부분을 이용해서 다운받은 유저의 정보를 넣어서 워터마킹을 할 수 있다. 이건 아주 간단한 방식이고 실제로는 더 복잡한 방법이 사용된다고 한다.  
하지만 이런 디지털 워터 마킹에는 약점이 있다. 이런 방식은 원본 이미지만 구해서 바이너리 레벨로 비교하면 바로 워터마킹이 들어있다는 것을 알 수 있다는 점이다. 원본이 아니더라도 다른 워터마킹된 파일만 구해서 비교해보면 확인이 가능 할 것이다. 두 파일을 비교해서 다르게 나타나는 부분만 무작위 값들로 바꿔버리면 워터마킹은 의미가 없어진다.